import { http, HttpResponse } from 'msw';
import { GameMate, Review } from '../config/types';
import { dummyChatLists, dummyChatMessage } from './dummy';

const delay = (ms: number) =>
  new Promise((res) => {
    setTimeout(res, ms);
  });

export const mateData: Record<string, GameMate[]> = {
  '1': [
    {
      id: 1,
      nickname: 'Summoner123',
      email: 'summoner123@example.com',
      gender: 'male',
      description: '즐겁게 게임할 파트너를 찾고 있습니다.',
      birthday: '1995-08-15',
      profile_image: 'https://picsum.photos/200/300?random=1',
      is_online: true,
      game_id: 1,
      level: 'Diamond',
      price: 9999,
      average_rating: 4,
      amount: 500,
      is_mate: true,
    },
    {
      id: 2,
      nickname: 'ChampionMaster',
      email: 'championmaster@example.com',
      gender: 'female',
      description: '챔피언 마스터와 함께 게임을 즐겨보세요.',
      birthday: '1998-04-22',
      profile_image: 'https://picsum.photos/200/300?random=2',
      is_online: false,
      game_id: 1,
      level: 'Platinum',
      price: 8000,
      average_rating: 5,
      amount: 300,
      is_mate: true,
    },
    {
      id: 3,
      nickname: 'AggressivePlayer',
      email: 'aggressiveplayer@example.com',
      gender: 'male',
      description: '공격적인 플레이 스타일을 선호합니다.',
      birthday: '1991-06-11',
      profile_image: 'https://picsum.photos/200/300?random=9',
      is_online: true,
      game_id: 1,
      level: 'Gold',
      price: 7500,
      average_rating: 3,
      amount: 200,
      is_mate: true,
    },
    {
      id: 4,
      nickname: 'MysticMage',
      email: 'mysticmage@example.com',
      gender: 'female',
      description: '마법을 다루는 데 능숙합니다.',
      birthday: '1997-09-29',
      profile_image: 'https://picsum.photos/200/300?random=10',
      is_online: false,
      game_id: 1,
      level: 'Silver',
      price: 6000,
      average_rating: 4,
      amount: 150,
      is_mate: true,
    },
    {
      id: 5,
      nickname: 'FastRunner',
      email: 'fastrunner@example.com',
      gender: 'male',
      description: '빠른 이동과 전략적 공격을 자랑합니다.',
      birthday: '1994-01-15',
      profile_image: 'https://picsum.photos/200/300?random=11',
      is_online: true,
      game_id: 1,
      level: 'Platinum',
      price: 9000,
      average_rating: 4,
      amount: 250,
      is_mate: true,
    },
    {
      id: 6,
      nickname: 'GuardianAngel',
      email: 'guardianangel@example.com',
      gender: 'female',
      description: '팀원 보호와 서포트에 탁월합니다.',
      birthday: '1996-05-24',
      profile_image: 'https://picsum.photos/200/300?random=12',
      is_online: false,
      game_id: 1,
      level: 'Diamond',
      price: 10000,
      average_rating: 5,
      amount: 400,
      is_mate: true,
    },
  ],
  '2': [
    {
      id: 7,
      nickname: 'TeamStrategist',
      email: 'teamstrategist@example.com',
      gender: 'male',
      description: '팀 전략에 능숙한 플레이어를 찾습니다.',
      birthday: '1993-10-10',
      profile_image: 'https://picsum.photos/200/300?random=3',
      is_online: true,
      game_id: 2,
      level: 'Gold',
      price: 7000,
      average_rating: 3,
      amount: 200,
      is_mate: true,
    },
    {
      id: 8,
      nickname: 'TacticianGamer',
      email: 'tacticiangamer@example.com',
      gender: 'female',
      description: '전략 게임을 사랑하는 분들을 위해.',
      birthday: '1997-12-30',
      profile_image: 'https://picsum.photos/200/300?random=4',
      is_online: false,
      game_id: 2,
      level: 'Silver',
      price: 6000,
      average_rating: 4,
      amount: 100,
      is_mate: true,
    },
    {
      id: 9,
      nickname: 'Commander',
      email: 'commander@example.com',
      gender: 'male',
      description: '팀원들을 지휘하는 데 능숙합니다.',
      birthday: '1992-03-25',
      profile_image: 'https://picsum.photos/200/300?random=13',
      is_online: true,
      game_id: 2,
      level: 'Platinum',
      price: 8500,
      average_rating: 5,
      amount: 300,
      is_mate: true,
    },
    {
      id: 10,
      nickname: 'SneakyFox',
      email: 'sneakyfox@example.com',
      gender: 'female',
      description: '적을 기습하는 플레이를 즐깁니다.',
      birthday: '1998-06-18',
      profile_image: 'https://picsum.photos/200/300?random=14',
      is_online: false,
      game_id: 2,
      level: 'Gold',
      price: 7500,
      average_rating: 4,
      amount: 200,
      is_mate: true,
    },
    {
      id: 11,
      nickname: 'ShieldBearer',
      email: 'shieldbearer@example.com',
      gender: 'male',
      description: '방어와 서포트를 전문으로 합니다.',
      birthday: '1995-08-12',
      profile_image: 'https://picsum.photos/200/300?random=15',
      is_online: true,
      game_id: 2,
      level: 'Silver',
      price: 6500,
      average_rating: 3,
      amount: 150,
      is_mate: true,
    },
    {
      id: 12,
      nickname: 'Mastermind',
      email: 'mastermind@example.com',
      gender: 'female',
      description: '모든 전략을 구상하고 실행합니다.',
      birthday: '1999-02-05',
      profile_image: 'https://picsum.photos/200/300?random=16',
      is_online: false,
      game_id: 2,
      level: 'Diamond',
      price: 9500,
      average_rating: 5,
      amount: 350,
      is_mate: true,
    },
  ],
  '3': [
    {
      id: 13,
      nickname: 'BattleExpert',
      email: 'battleexpert@example.com',
      gender: 'male',
      description: '배틀 그라운드에서의 최고의 경험을 제공합니다.',
      birthday: '1996-07-14',
      profile_image: 'https://picsum.photos/200/300?random=5',
      is_online: true,
      game_id: 3,
      level: 'Platinum',
      price: 10000,
      average_rating: 5,
      amount: 400,
      is_mate: true,
    },
    {
      id: 14,
      nickname: 'SniperQueen',
      email: 'sniperqueen@example.com',
      gender: 'female',
      description: '정확한 조준과 신속한 움직임을 자랑합니다.',
      birthday: '1994-03-18',
      profile_image: 'https://picsum.photos/200/300?random=6',
      is_online: false,
      game_id: 3,
      level: 'Gold',
      price: 9000,
      average_rating: 4,
      amount: 350,
      is_mate: true,
    },
    {
      id: 15,
      nickname: 'GrenadeKing',
      email: 'grenadeking@example.com',
      gender: 'male',
      description: '수류탄 사용에 능숙합니다.',
      birthday: '1995-11-22',
      profile_image: 'https://picsum.photos/200/300?random=17',
      is_online: true,
      game_id: 3,
      level: 'Silver',
      price: 7000,
      average_rating: 3,
      amount: 200,
      is_mate: true,
    },
    {
      id: 16,
      nickname: 'StealthAssassin',
      email: 'stealthassassin@example.com',
      gender: 'female',
      description: '은밀히 적을 제거하는 것을 좋아합니다.',
      birthday: '1993-05-10',
      profile_image: 'https://picsum.photos/200/300?random=18',
      is_online: false,
      game_id: 3,
      level: 'Gold',
      price: 8000,
      average_rating: 4,
      amount: 250,
      is_mate: true,
    },
    {
      id: 17,
      nickname: 'BulletStorm',
      email: 'bulletstorm@example.com',
      gender: 'male',
      description: '강력한 화력을 자랑합니다.',
      birthday: '1997-08-04',
      profile_image: 'https://picsum.photos/200/300?random=19',
      is_online: true,
      game_id: 3,
      level: 'Platinum',
      price: 9500,
      average_rating: 5,
      amount: 300,
      is_mate: true,
    },
    {
      id: 18,
      nickname: 'ScoutLeader',
      email: 'scoutleader@example.com',
      gender: 'female',
      description: '정찰과 정보 수집을 전문으로 합니다.',
      birthday: '1998-01-27',
      profile_image: 'https://picsum.photos/200/300?random=20',
      is_online: false,
      game_id: 3,
      level: 'Diamond',
      price: 10500,
      average_rating: 5,
      amount: 400,
      is_mate: true,
    },
  ],
  '4': [
    {
      id: 19,
      nickname: 'OverwatchHero',
      email: 'overwatchhero@example.com',
      gender: 'male',
      description: '오버워치의 영웅과 함께 플레이하세요.',
      birthday: '1992-11-11',
      profile_image: 'https://picsum.photos/200/300?random=7',
      is_online: true,
      game_id: 4,
      level: 'Diamond',
      price: 12000,
      average_rating: 5,
      amount: 600,
      is_mate: true,
    },
    {
      id: 20,
      nickname: 'SupportMaster',
      email: 'supportmaster@example.com',
      gender: 'female',
      description: '최고의 서포트를 제공해드립니다.',
      birthday: '1999-05-05',
      profile_image: 'https://picsum.photos/200/300?random=8',
      is_online: false,
      game_id: 4,
      level: 'Platinum',
      price: 11000,
      average_rating: 4,
      amount: 450,
      is_mate: true,
    },
    {
      id: 21,
      nickname: 'TankCommander',
      email: 'tankcommander@example.com',
      gender: 'male',
      description: '강력한 방어와 공격을 모두 수행합니다.',
      birthday: '1995-03-19',
      profile_image: 'https://picsum.photos/200/300?random=21',
      is_online: true,
      game_id: 4,
      level: 'Gold',
      price: 9500,
      average_rating: 4,
      amount: 300,
      is_mate: true,
    },
    {
      id: 22,
      nickname: 'HealerOfHope',
      email: 'healerofhope@example.com',
      gender: 'female',
      description: '모든 팀원을 치유하는 데 집중합니다.',
      birthday: '1996-12-08',
      profile_image: 'https://picsum.photos/200/300?random=22',
      is_online: false,
      game_id: 4,
      level: 'Silver',
      price: 8000,
      average_rating: 3,
      amount: 200,
      is_mate: true,
    },
    {
      id: 23,
      nickname: 'QuickShot',
      email: 'quickshot@example.com',
      gender: 'male',
      description: '빠른 반응 속도로 적을 제압합니다.',
      birthday: '1993-07-21',
      profile_image: 'https://picsum.photos/200/300?random=23',
      is_online: true,
      game_id: 4,
      level: 'Platinum',
      price: 10500,
      average_rating: 5,
      amount: 350,
      is_mate: true,
    },
    {
      id: 24,
      nickname: 'ShieldGuardian',
      email: 'shieldguardian@example.com',
      gender: 'female',
      description: '팀을 지키는 방패 역할을 수행합니다.',
      birthday: '1997-09-15',
      profile_image: 'https://picsum.photos/200/300?random=24',
      is_online: false,
      game_id: 4,
      level: 'Diamond',
      price: 11500,
      average_rating: 5,
      amount: 500,
      is_mate: true,
    },
  ],
};

const reviewData: Review[] = [
  {
    id: '1',
    request_id: 'Summoner123', // 의뢰자 아이디
    rating: 5,
    content: '정말 최고의 게임 메이트였습니다! 추천합니다.',
    created_at: new Date('2024-10-01'),
  },
  {
    id: '2',
    request_id: 'GameMaster456', // 의뢰자 아이디
    rating: 4,
    content: '전반적으로 좋았지만, 약간의 의사소통 문제가 있었어요.',
    created_at: new Date('2024-10-02'),
  },
  {
    id: '3',
    request_id: 'AcePlayer789', // 의뢰자 아이디
    rating: 3,
    content: '괜찮았지만 기대에 미치지 못했습니다.',
    created_at: new Date('2024-10-03'),
  },
  {
    id: '4',
    request_id: 'ProGamer999', // 의뢰자 아이디
    rating: 5,
    content: '매우 유능한 파트너! 다시 함께 하고 싶어요.',
    created_at: new Date('2024-10-04'),
  },
  {
    id: '5',
    request_id: 'GameNerd123', // 의뢰자 아이디
    rating: 2,
    content: '기대했던 것보다 많이 아쉬웠습니다.',
    created_at: new Date('2024-10-05'),
  },
];

const todayRecommendData: GameMate[] = [
  {
    id: 1,
    nickname: 'ProGamer123',
    email: 'progamer123@example.com',
    gender: 'male',
    description: 'FPS 게임 마스터',
    birthday: '1995-08-10',
    profile_image: 'https://picsum.photos/200/300?random=1',
    is_mate: true,
    is_online: true,
    game_id: 4,
    level: 'Diamond',
    price: 3000,
    average_rating: 4.8,
    amount: 5,
  },
  {
    id: 2,
    nickname: 'MageMaster',
    email: 'magemaster@example.com',
    gender: 'female',
    description: 'RPG 전문가',
    birthday: '1998-05-12',
    profile_image: 'https://picsum.photos/200/300?random=2',
    is_mate: true,
    is_online: true,
    game_id: 3,
    level: 'Platinum',
    price: 2500,
    average_rating: 4.7,
    amount: 10,
  },
  {
    id: 3,
    nickname: 'SniperElite',
    email: 'sniperelite@example.com',
    gender: 'male',
    description: '스나이퍼 전문',
    birthday: '1996-11-22',
    profile_image: 'https://picsum.photos/200/300?random=3',
    is_mate: true,
    is_online: true,
    game_id: 4,
    level: 'Gold',
    price: 2000,
    average_rating: 4.5,
    amount: 7,
  },
  {
    id: 4,
    nickname: 'SpeedRacer',
    email: 'speedracer@example.com',
    gender: 'male',
    description: '레이싱 게임 전문가',
    birthday: '1994-03-15',
    profile_image: 'https://picsum.photos/200/300?random=4',
    is_mate: true,
    is_online: true,
    game_id: 2,
    level: 'Master',
    price: 3500,
    average_rating: 4.9,
    amount: 3,
  },
  {
    id: 5,
    nickname: 'TacticalGenius',
    email: 'tacticalgenius@example.com',
    gender: 'female',
    description: '전략 게임 천재',
    birthday: '1999-12-01',
    profile_image: 'https://picsum.photos/200/300?random=5',
    is_mate: true,
    is_online: true,
    game_id: 4,
    level: 'Diamond',
    price: 2800,
    average_rating: 4.6,
    amount: 8,
  },
];

export const handlers = [
  // 게임 카테고리별(gameId) API 요청
  http.get(`/api/v1/mates/:gameId`, ({ params }) => {
    const { gameId } = params;

    if (!mateData[gameId as string]) {
      return HttpResponse.json({ error: '올바르지 않은 게임 카테고리 입니다.' }, { status: 404 });
    }

    const response = mateData[gameId as string];
    return HttpResponse.json(response);
  }),

  // 최신 리뷰 데이터 요청
  http.get(`/api/v1/users/review`, () => {
    return HttpResponse.json(reviewData);
  }),

  // 최신 리뷰 데이터 요청
  http.get(`/api/v1/users/todayrecommend`, () => {
    return HttpResponse.json(todayRecommendData);
  }),

  // 페이지네이션
  http.get(`/api/v1/users/:gameId/mate`, async ({ request, params }) => {
    const url = new URL(request.url);
    const cursor = Number(url.searchParams.get('cursor') as string) || 0;
    await delay(3000);
    const { gameId } = params;
    return HttpResponse.json([
      {
        id: cursor + 1,
        nickname: 'Summoner123',
        email: 'summoner123@example.com',
        gender: 'male',
        description: '즐겁게 게임할 파트너를 찾고 있습니다.',
        birthday: '1995-08-15',
        profile_image: 'https://picsum.photos/200/300?random=1',
        is_online: true,
        game_id: Number(gameId),
        level: 'Diamond',
        price: 9999,
        average_rating: 4,
        amount: 500,
        is_mate: true,
      },
      {
        id: cursor + 2,
        nickname: 'ChampionMaster',
        email: 'championmaster@example.com',
        gender: 'female',
        description: '챔피언 마스터와 함께 게임을 즐겨보세요.',
        birthday: '1998-04-22',
        profile_image: 'https://picsum.photos/200/300?random=2',
        is_online: false,
        game_id: Number(gameId),
        level: 'Platinum',
        price: 8000,
        average_rating: 5,
        amount: 300,
        is_mate: true,
      },
      {
        id: cursor + 3,
        nickname: 'AggressivePlayer',
        email: 'aggressiveplayer@example.com',
        gender: 'male',
        description: '공격적인 플레이 스타일을 선호합니다.',
        birthday: '1991-06-11',
        profile_image: 'https://picsum.photos/200/300?random=9',
        is_online: true,
        game_id: Number(gameId),
        level: 'Gold',
        price: 7500,
        average_rating: 3,
        amount: 200,
        is_mate: true,
      },
      {
        id: cursor + 4,
        nickname: 'MysticMage',
        email: 'mysticmage@example.com',
        gender: 'female',
        description: '마법을 다루는 데 능숙합니다.',
        birthday: '1997-09-29',
        profile_image: 'https://picsum.photos/200/300?random=10',
        is_online: false,
        game_id: Number(gameId),
        level: 'Silver',
        price: 6000,
        average_rating: 4,
        amount: 150,
        is_mate: true,
      },
      {
        id: cursor + 5,
        nickname: 'FastRunner',
        email: 'fastrunner@example.com',
        gender: 'male',
        description: '빠른 이동과 전략적 공격을 자랑합니다.',
        birthday: '1994-01-15',
        profile_image: 'https://picsum.photos/200/300?random=11',
        is_online: true,
        game_id: Number(gameId),
        level: 'Platinum',
        price: 9000,
        average_rating: 4,
        amount: 250,
        is_mate: true,
      },
      {
        id: cursor + 6,
        nickname: 'GuardianAngel',
        email: 'guardianangel@example.com',
        gender: 'female',
        description: '팀원 보호와 서포트에 탁월합니다.',
        birthday: '1996-05-24',
        profile_image: 'https://picsum.photos/200/300?random=12',
        is_online: false,
        game_id: Number(gameId),
        level: 'Diamond',
        price: 10000,
        average_rating: 5,
        amount: 400,
        is_mate: true,
      },
      {
        id: cursor + 7,
        nickname: 'OverwatchHero',
        email: 'overwatchhero@example.com',
        gender: 'male',
        description: '오버워치의 영웅과 함께 플레이하세요.',
        birthday: '1992-11-11',
        profile_image: 'https://picsum.photos/200/300?random=7',
        is_online: true,
        game_id: Number(gameId),
        level: 'Diamond',
        price: 12000,
        average_rating: 5,
        amount: 600,
        is_mate: true,
      },
      {
        id: cursor + 8,
        nickname: 'SupportMaster',
        email: 'supportmaster@example.com',
        gender: 'female',
        description: '최고의 서포트를 제공해드립니다.',
        birthday: '1999-05-05',
        profile_image: 'https://picsum.photos/200/300?random=8',
        is_online: false,
        game_id: Number(gameId),
        level: 'Platinum',
        price: 11000,
        average_rating: 4,
        amount: 450,
        is_mate: true,
      },
      {
        id: cursor + 9,
        nickname: 'TankCommander',
        email: 'tankcommander@example.com',
        gender: 'male',
        description: '강력한 방어와 공격을 모두 수행합니다.',
        birthday: '1995-03-19',
        profile_image: 'https://picsum.photos/200/300?random=21',
        is_online: true,
        game_id: Number(gameId),
        level: 'Gold',
        price: 9500,
        average_rating: 4,
        amount: 300,
        is_mate: true,
      },
      {
        id: cursor + 10,
        nickname: 'HealerOfHope',
        email: 'healerofhope@example.com',
        gender: 'female',
        description: '모든 팀원을 치유하는 데 집중합니다.',
        birthday: '1996-12-08',
        profile_image: 'https://picsum.photos/200/300?random=22',
        is_online: false,
        game_id: Number(gameId),
        level: 'Silver',
        price: 8000,
        average_rating: 3,
        amount: 200,
        is_mate: true,
      },
    ]);
  }),
  // 채팅 전체 목록 조회
  http.get('/api/v1/chats/rooms/', () => {
    return HttpResponse.json(dummyChatLists);
  }),
  // 채팅 내역 상세 조회
  http.get(`/api/v1/chats/:roomId/messages`, () => {
    return HttpResponse.json(dummyChatMessage);
  }),
  // 채팅 메세지 전송
  http.post(`/api/v1/chats/:roomId/messages`, () => {
    return HttpResponse.json({ message: '메세지가 전송되었습니다.' }, { status: 200 });
  }),
  // 채팅방 생성
  http.post('/api/v1/chats/create/', () => {
    return HttpResponse.json({ message: '채팅방이 생성되었습니다.' }, { status: 201 });
  }),
];
